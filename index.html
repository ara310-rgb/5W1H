<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°</title>
  <style>
    :root{
      --bg: #fff7f3;
      --card: rgba(255,255,255,.65);
      --stroke: rgba(0,0,0,.08);
      --text: #1f2937;
      --muted:#6b7280;
      --pink:#ff7fb5;
      --pink2:#ffb4d2;
      --shadow: 0 18px 45px rgba(0,0,0,.08);
      --radius: 22px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 20% 0%, rgba(255,127,181,.25), transparent 60%),
        radial-gradient(1000px 600px at 80% 10%, rgba(255,180,210,.28), transparent 60%),
        linear-gradient(180deg, #fff9f6, var(--bg));
      min-height:100vh;
      padding: 22px 14px 40px;
    }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      display:flex;
      flex-direction:column;
      gap: 16px;
    }

    .card{
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    header.card{
      padding: 18px 18px 14px;
      position:relative;
      overflow:hidden;
    }
    header .top{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 14px;
      flex-wrap:wrap;
    }
    h1{
      font-size: 22px;
      margin: 0;
      letter-spacing:-.3px;
    }
    .sub{
      margin-top: 6px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.35;
    }

    .bubbles{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      margin-left:auto;
    }
    .bubble{
      cursor:pointer;
      user-select:none;
      font-size: 13px;
      line-height:1.25;
      padding: 10px 12px;
      border-radius: 18px;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(0,0,0,.06);
      box-shadow: 0 10px 18px rgba(0,0,0,.06);
      max-width: 270px;
      position:relative;
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .bubble:hover{
      transform: translateY(-1px);
      box-shadow: 0 14px 24px rgba(0,0,0,.08);
    }
    .bubble:after{
      content:"";
      position:absolute;
      bottom:-8px;
      left: 18px;
      width: 14px;
      height: 14px;
      background: rgba(255,255,255,.78);
      border-left: 1px solid rgba(0,0,0,.06);
      border-bottom: 1px solid rgba(0,0,0,.06);
      transform: rotate(45deg);
      border-bottom-left-radius: 4px;
    }

    main.card{ padding: 16px; }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }
    @media (min-width: 860px){
      .grid{ grid-template-columns: 1.05fr .95fr; }
    }

    label{
      font-size: 13px;
      color: var(--muted);
      display:block;
      margin: 0 0 8px;
    }

    .input, textarea, pre, select{
      width:100%;
      border-radius: 18px;
      border: 1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.75);
      box-shadow: inset 0 2px 0 rgba(255,255,255,.9);
      outline:none;
    }

    .input{
      padding: 12px 12px;
      font-size: 14px;
    }

    textarea{
      min-height: 160px;
      padding: 12px 12px;
      font-size: 14px;
      resize: vertical;
      line-height:1.45;
    }

    .row{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .btn{
      border:none;
      cursor:pointer;
      border-radius: 18px;
      padding: 12px 14px;
      font-size: 14px;
      font-weight: 700;
      color: #fff;
      background: linear-gradient(180deg, var(--pink), #ff4e99);
      box-shadow: 0 14px 28px rgba(255,78,153,.28);
      transition: transform .12s ease, filter .12s ease, opacity .12s ease;
      white-space:nowrap;
    }
    .btn:hover{ transform: translateY(-1px); filter: brightness(1.02); }
    .btn:disabled{ opacity:.55; cursor:not-allowed; transform:none; }

    .ghost{
      background: rgba(255,255,255,.78);
      color: var(--text);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 10px 20px rgba(0,0,0,.06);
      font-weight: 700;
    }

    .hint{
      font-size: 12px;
      color: var(--muted);
      margin-top: 6px;
      line-height:1.35;
    }

    .resultBox{
      padding: 12px;
      border-radius: 18px;
      border: 1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.72);
      box-shadow: inset 0 2px 0 rgba(255,255,255,.9);
      min-height: 260px;
      overflow:auto;
      white-space: pre-wrap;
      line-height:1.5;
      font-size: 14px;
    }

    .status{
      font-size: 12px;
      color: var(--muted);
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(0,0,0,.06);
      font-size: 12px;
      color: var(--muted);
    }

    select.input{
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      padding-right: 38px;
      background-image:
        linear-gradient(45deg, transparent 50%, rgba(0,0,0,.45) 50%),
        linear-gradient(135deg, rgba(0,0,0,.45) 50%, transparent 50%);
      background-position:
        calc(100% - 18px) 50%,
        calc(100% - 12px) 50%;
      background-size: 6px 6px, 6px 6px;
      background-repeat: no-repeat;
    }

    /* 5W1H grid */
    .wgrid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-bottom: 12px;
    }
    @media (min-width: 520px){
      .wgrid{ grid-template-columns: 1fr 1fr; }
    }

    .field{
      display:flex;
      flex-direction:column;
      gap: 8px;
    }

    /* âœ… ì¶”ê°€: 5W1H ìƒë‹¨ ë¼ë²¨ */
    .fhead{
      font-size: 12px;
      font-weight: 800;
      color: var(--muted);
      padding: 0 2px;
      letter-spacing: .2px;
      text-transform: lowercase;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <!-- HEADER -->
    <header class="card">
      <div class="top">
        <div>
          <h1>í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°</h1>
          <div class="sub">5W1H ê¸°ë°˜ í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°ì…ë‹ˆë‹¤ âœ¨</div>
        </div>

        <div class="bubbles" aria-label="ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸">
          <div class="bubble" data-who="ì¤‘ì†Œ ì œì¡°ì—…ì²´(ì§ì›30ëª…)"
               data-what="ì¹œí™˜ê²½ í¬ì¥ì¬ë¥¼ ìœ ëŸ½ ì‹œì¥ì— ìˆ˜ì¶œ"
               data-when="2026ë…„ í•˜ë°˜ê¸°ë¶€í„° ë³¸ê²© ìˆ˜ì¶œ ì‹œì‘"
               data-where="ë…ì¼, í”„ë‘ìŠ¤, ë„¤ëœë€ë“œë¥¼ 1ì°¨ íƒ€ê²Ÿ"
               data-why="EUì˜ í”Œë¼ìŠ¤í‹± ê·œì œ ê°•í™”ë¡œ ì¹œí™˜ê²½ í¬ì¥ì¬ ìˆ˜ìš” ê¸‰ì¦"
               data-how="í˜„ì¬ ìœ í†µì‚¬ íŒŒíŠ¸ë„ˆì‹­ì„ í–¥í•œ B2B íŒë§¤">
            5W1H ìˆ˜ì¶œ ì „ëµ
          </div>

          <div class="bubble" data-who="UX ë¼ì´í„°"
               data-what="'í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°' ì›¹í˜ì´ì§€ ë²„íŠ¼ ë¬¸êµ¬ 10ê°œ ì¶”ì²œ"
               data-when="ì´ë²ˆ ì£¼ ë‚´"
               data-where="ëª¨ë°”ì¼/ì›¹ ëª¨ë‘"
               data-why="í´ë¦­ ì „í™˜ìœ¨ì„ ë†’ì´ê³  ì¹œê·¼í•œ í†¤ì„ ë§Œë“¤ê¸° ìœ„í•´"
               data-how="ì§§ê³  ê·€ì—½ê³  ì§ê´€ì ì¸ ë¬¸êµ¬ë¡œ ì œì•ˆ">
            UX ë²„íŠ¼ ë¬¸êµ¬
          </div>

          <div class="bubble" data-who="ì´ˆë“± ì €í•™ë…„ ì„ ìƒë‹˜"
               data-what="5ì„¸ ë¯¸ë§Œ ì–´ë¦°ì´ë¥¼ ìœ„í•œ 5ë¬¸ì¥ ë™í™” + ê° ë¬¸ì¥ ê·¸ë¦¼ í”„ë¡¬í”„íŠ¸"
               data-when="ì˜¤ëŠ˜"
               data-where="ê°€ì •/ìœ ì¹˜ì›"
               data-why="ì§§ê³  ì‰¬ìš´ ë¬¸ì¥ìœ¼ë¡œ ì–¸ì–´ ìê·¹ì„ ì£¼ê¸° ìœ„í•´"
               data-how="ë¬¸ì¥ë§ˆë‹¤ 1ì¤„ ê·¸ë¦¼ ì„¤ëª…ì„ í•¨ê»˜ ì œê³µ">
            ë™í™” + ê·¸ë¦¼
          </div>
        </div>
      </div>
    </header>

    <!-- BODY -->
    <main class="card">
      <div class="grid">
        <!-- Left: Inputs -->
        <section>
          <div class="row" style="justify-content:space-between; margin-bottom:10px;">
            <div class="pill">ğŸ§í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°</div>
          </div>

          <div style="margin-bottom:12px;">
            <label for="apiKey">OpenAI API Key</label>
            <input class="input" id="apiKey" type="password" placeholder="sk-..." autocomplete="off" />
          </div>

          <div style="margin-bottom:12px;">
            <label for="model">Model</label>
            <select class="input" id="model">
              <option value="">API Key ì…ë ¥ í›„ ëª¨ë¸ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤</option>
            </select>
          </div>

          <!-- âœ… 5W1H Inputs (ë¼ë²¨ + placeholder ì •ë¦¬ ì ìš©) -->
          <div style="margin-bottom:12px;">
            <label>5W1H ì…ë ¥</label>
            <div class="wgrid">
              <div class="field">
                <div class="fhead">who</div>
                <input class="input" id="who" placeholder="ì˜ˆ: ì¤‘ì†Œ ì œì¡°ì—…ì²´(ì§ì›30ëª…)" />
              </div>

              <div class="field">
                <div class="fhead">what</div>
                <input class="input" id="what" placeholder="ì˜ˆ: ì¹œí™˜ê²½ í¬ì¥ì¬ë¥¼ ìœ ëŸ½ ì‹œì¥ì— ìˆ˜ì¶œ" />
              </div>

              <div class="field">
                <div class="fhead">when</div>
                <input class="input" id="when" placeholder="ì˜ˆ: 2026ë…„ í•˜ë°˜ê¸°ë¶€í„° ë³¸ê²© ìˆ˜ì¶œ ì‹œì‘" />
              </div>

              <div class="field">
                <div class="fhead">where</div>
                <input class="input" id="where" placeholder="ì˜ˆ: ë…ì¼, í”„ë‘ìŠ¤, ë„¤ëœë€ë“œ 1ì°¨ íƒ€ê²Ÿ" />
              </div>

              <div class="field">
                <div class="fhead">why</div>
                <input class="input" id="why" placeholder="ì˜ˆ: EU í”Œë¼ìŠ¤í‹± ê·œì œ ê°•í™”ë¡œ ìˆ˜ìš” ê¸‰ì¦" />
              </div>

              <div class="field">
                <div class="fhead">how</div>
                <input class="input" id="how" placeholder="ì˜ˆ: ìœ í†µì‚¬ íŒŒíŠ¸ë„ˆì‹­ ê¸°ë°˜ B2B íŒë§¤" />
              </div>
            </div>
          </div>

          <div style="margin-bottom:12px;">
            <label for="prompt">í”„ë¡¬í”„íŠ¸ ì…ë ¥ ì˜ˆì‹œ</label>
            <textarea id="prompt" placeholder="5W1Hë¥¼ ì±„ìš°ë©´ ìë™ìœ¼ë¡œ êµ¬ì„±ë˜ë©°, ìˆ˜ì •ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤."></textarea>
          </div>

          <div class="row">
            <button class="btn" id="genBtn">ê²°ê³¼ ìƒì„±</button>
            <button class="btn ghost" id="clearBtn" type="button">ì´ˆê¸°í™”</button>
            <span class="status" id="statusText"></span>
          </div>

          <div class="hint" style="margin-top:10px;">
            ì¶œë ¥ì€ â€œì¹´í…Œê³ ë¦¬ë³„ ìˆœë²ˆâ€ìœ¼ë¡œ, <b>300~500ì</b> ë‚´ë¡œ ì œí•œë˜ë„ë¡ ìš”ì²­í•©ë‹ˆë‹¤.
          </div>
        </section>

        <!-- Right: Output -->
        <section>
          <label>OPENAI API ê¸°ë°˜ ê²°ê³¼</label>
          <div class="resultBox" id="result">ì—¬ê¸°ì— ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>
          <div class="hint" style="margin-top:10px;">
          </div>
        </section>
      </div>
    </main>
  </div>

  <script>
    const $ = (s) => document.querySelector(s);

    const apiKeyEl = $("#apiKey");
    const modelEl = $("#model");
    const promptEl = $("#prompt");
    const genBtn = $("#genBtn");
    const clearBtn = $("#clearBtn");
    const resultEl = $("#result");
    const statusText = $("#statusText");
    const connPill = $("#connPill");

    // 5W1H elements
    const whoEl = $("#who");
    const whatEl = $("#what");
    const whenEl = $("#when");
    const whereEl = $("#where");
    const whyEl = $("#why");
    const howEl = $("#how");

    function setLoading(isLoading){
      genBtn.disabled = isLoading;
      genBtn.textContent = isLoading ? "ìƒì„± ì¤‘..." : "ê²°ê³¼ ìƒì„±";
      if (isLoading) connPill.textContent = "ìƒíƒœ: ìš”ì²­ ì¤‘";
    }

    function extractText(data){
      if (!data) return "";
      if (typeof data.output_text === "string" && data.output_text.trim()) return data.output_text;

      const out = [];
      const output = Array.isArray(data.output) ? data.output : [];
      for (const item of output){
        const content = Array.isArray(item.content) ? item.content : [];
        for (const c of content){
          if (c && typeof c.text === "string") out.push(c.text);
          if (c && typeof c.output_text === "string") out.push(c.output_text);
        }
      }
      return out.join("\n").trim();
    }

    // âœ… 5W1H -> Markdown prompt builder (ìš”ì²­í•˜ì‹  ìˆœì„œëŒ€ë¡œ)
    function buildMarkdownPrompt(){
      const who = (whoEl.value || "").trim();
      const what = (whatEl.value || "").trim();
      const when = (whenEl.value || "").trim();
      const where = (whereEl.value || "").trim();
      const why = (whyEl.value || "").trim();
      const how = (howEl.value || "").trim();

      return `ì•„ë˜ ì…ë ¥ì„ ë°”íƒ•ìœ¼ë¡œ ê²°ê³¼ë¥¼ ìƒì„±í•˜ì„¸ìš”.

#ì…ë ¥
[who] = ${who || "(ë¯¸ì…ë ¥)"}
[what] = ${what || "(ë¯¸ì…ë ¥)"}
[when] = ${when || "(ë¯¸ì…ë ¥)"}
[where] = ${where || "(ë¯¸ì…ë ¥)"}
[why] = ${why || "(ë¯¸ì…ë ¥)"}
[how] = ${how || "(ë¯¸ì…ë ¥)"}

#ì¶œë ¥
- ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±
- ì „ì²´ ë¶„ëŸ‰ì€ ê³µë°± í¬í•¨ 300~500ì
- ì¹´í…Œê³ ë¦¬ë³„ë¡œ ìˆœë²ˆì„ ë¶™ì—¬ ì¶œë ¥ (ì˜ˆ: 1) Who 2) What ... í˜•íƒœ)
- ê° ì¹´í…Œê³ ë¦¬ëŠ” 1~2ë¬¸ì¥ìœ¼ë¡œ ê°„ê²°í•˜ê²Œ
- ë¶ˆí•„ìš”í•œ ì„œë¡ /ë©´ì±…/ë©”íƒ€ì„¤ëª… ì—†ì´ ê²°ê³¼ë§Œ ì¶œë ¥`;
    }

    function syncPromptFrom5W1H(){
      promptEl.value = buildMarkdownPrompt();
    }

    // 5W1H ì…ë ¥ ì‹œ ìë™ìœ¼ë¡œ prompt êµ¬ì„±
    [whoEl, whatEl, whenEl, whereEl, whyEl, howEl].forEach(el => {
      el.addEventListener("input", () => {
        syncPromptFrom5W1H();
      });
    });

    // Example bubbles -> fill 5W1H then prompt
    document.querySelectorAll(".bubble").forEach(b => {
      b.addEventListener("click", () => {
        whoEl.value = b.dataset.who || "";
        whatEl.value = b.dataset.what || "";
        whenEl.value = b.dataset.when || "";
        whereEl.value = b.dataset.where || "";
        whyEl.value = b.dataset.why || "";
        howEl.value = b.dataset.how || "";
        syncPromptFrom5W1H();
        promptEl.focus();
      });
    });

    clearBtn.addEventListener("click", () => {
      whoEl.value = "";
      whatEl.value = "";
      whenEl.value = "";
      whereEl.value = "";
      whyEl.value = "";
      howEl.value = "";

      promptEl.value = "";
      resultEl.textContent = "ì—¬ê¸°ì— ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.";
      statusText.textContent = "";
      connPill.textContent = "ìƒíƒœ: ëŒ€ê¸°";
    });

    async function loadModels(){
      const apiKey = (apiKeyEl.value || "").trim();
      if (!apiKey) return;

      try{
        connPill.textContent = "ìƒíƒœ: ëª¨ë¸ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘";
        statusText.textContent = "";

        modelEl.innerHTML = `<option value="">ëª¨ë¸ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</option>`;

        const res = await fetch("https://api.openai.com/v1/models", {
          method: "GET",
          headers: { "Authorization": `Bearer ${apiKey}` }
        });

        const data = await res.json().catch(() => ({}));

        if (!res.ok){
          const msg = data?.error?.message || "ëª¨ë¸ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨";
          throw new Error(msg);
        }

        const models = (data.data || [])
          .map(m => m.id)
          .filter(id => typeof id === "string" && id.includes("gpt"))
          .sort();

        modelEl.innerHTML = "";

        if (models.length === 0){
          modelEl.innerHTML = `<option value="">ì‚¬ìš© ê°€ëŠ¥í•œ GPT ëª¨ë¸ì´ ì—†ìŠµë‹ˆë‹¤</option>`;
        } else {
          for (const id of models){
            const opt = document.createElement("option");
            opt.value = id;
            opt.textContent = id;
            modelEl.appendChild(opt);
          }
          if (models.includes("gpt-4o-mini")) modelEl.value = "gpt-4o-mini";
          else modelEl.value = models[0];
        }

        connPill.textContent = "ìƒíƒœ: ëª¨ë¸ ì¤€ë¹„ ì™„ë£Œ";
      }catch(err){
        modelEl.innerHTML = `<option value="">ëª¨ë¸ ë¡œë“œ ì‹¤íŒ¨</option>`;
        connPill.textContent = "ìƒíƒœ: ì˜¤ë¥˜";
        statusText.textContent = "ì˜¤ë¥˜: " + (err?.message || "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜");
      }
    }

    // API Key ì…ë ¥ í›„ ëª¨ë¸ ìë™ ë¡œë”©
    apiKeyEl.addEventListener("change", loadModels);
    apiKeyEl.addEventListener("blur", loadModels);

    genBtn.addEventListener("click", async () => {
      const apiKey = (apiKeyEl.value || "").trim();
      const model = (modelEl.value || "").trim();
      const prompt = buildMarkdownPrompt();

      if (!apiKey){
        statusText.textContent = "API Keyë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.";
        return;
      }
      if (!model){
        statusText.textContent = "ëª¨ë¸ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.";
        return;
      }

      const allEmpty = [whoEl, whatEl, whenEl, whereEl, whyEl, howEl]
        .every(el => !(el.value || "").trim());
      if (allEmpty){
        statusText.textContent = "5W1H ì¤‘ ìµœì†Œ 1ê°œëŠ” ì…ë ¥í•´ ì£¼ì„¸ìš”.";
        return;
      }

      setLoading(true);
      statusText.textContent = "";
      resultEl.textContent = "ìƒì„± ì¤‘ì…ë‹ˆë‹¤...";
      connPill.textContent = "ìƒíƒœ: ìš”ì²­ ì¤‘";

      try{
        const res = await fetch("https://api.openai.com/v1/responses", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${apiKey}`
          },
          body: JSON.stringify({
            model,
            input: prompt
          })
        });

        const data = await res.json().catch(() => ({}));

        if (!res.ok){
          const msg = (data && data.error && data.error.message) ? data.error.message : "ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.";
          throw new Error(msg);
        }

        const text = extractText(data) || "(í…ìŠ¤íŠ¸ ê²°ê³¼ê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤. ì…ë ¥ì„ ë°”ê¿” ë³´ì„¸ìš”.)";
        resultEl.textContent = text;
        connPill.textContent = "ìƒíƒœ: ì™„ë£Œ";
      }catch(err){
        resultEl.textContent = "";
        statusText.textContent = "ì˜¤ë¥˜: " + (err?.message || "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜");
        connPill.textContent = "ìƒíƒœ: ì˜¤ë¥˜";
      }finally{
        setLoading(false);
      }
    });
  </script>
</body>
</html>